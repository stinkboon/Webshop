<div class="page-wrapper">
  <div class="reset-box">
    <img src="assets/Logo.png" alt="Logo" class="logo" />

    <h2 class="title">Nieuw wachtwoord instellen</h2>

    <form [formGroup]="resetForm" (ngSubmit)="resetPassword()" class="reset-card">
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Nieuw wachtwoord</mat-label>
        <input
          matInput
          [type]="hideNew ? 'password' : 'text'"
          formControlName="newPassword"
          autocomplete="new-password"
        />
        <app-show-hide-password [(hide)]="hideNew" matSuffix></app-show-hide-password>
        <mat-error *ngIf="resetForm.get('newPassword')?.hasError('required')">
          Wachtwoord is verplicht
        </mat-error>
        <mat-error *ngIf="resetForm.get('newPassword')?.hasError('minlength')">
          Minimaal 6 tekens
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Bevestig wachtwoord</mat-label>
        <input
          matInput
          [type]="hideConfirm ? 'password' : 'text'"
          formControlName="confirmPassword"
          autocomplete="new-password"
        />
        <app-show-hide-password [(hide)]="hideConfirm" matSuffix></app-show-hide-password>
        <mat-error *ngIf="resetForm.hasError('passwordMismatch')">
          Wachtwoorden komen niet overeen
        </mat-error>
      </mat-form-field>

      <button
        mat-flat-button
        color="primary"
        type="submit"
        class="submit-button"
        [disabled]="resetForm.invalid || loading"
      >
        Wachtwoord resetten
      </button>

      <mat-progress-spinner
        *ngIf="loading"
        diameter="30"
        mode="indeterminate"
        color="primary"
        style="margin-top: 1rem"
      ></mat-progress-spinner>
    </form>

    <div class="redirect-link">
      <a routerLink="/login">Terug naar login</a>
    </div>
  </div>
</div>
